<apex:page controller="skyplatform.ReconcileCallsController" action="{!start}" sidebar="true">
    <apex:form id="form">

        <apex:pageBlock id="topBlock" title="ShoreTel Sky Call Records" >
           	<apex:pageMessages id="pm"/>
           	
           	<apex:pageBlock title="{!pageTitle}" > 

				<apex:pageBlockButtons location="top" >
                	<apex:commandButton value="Save Changes" action="{!saveChanges}" />
                	<apex:commandButton value="Show All Calls" action="{!showAll}" rendered="{!!showAll}" />
                	<apex:commandButton value="Show Unreconciled Calls" action="{!showAll}"  rendered="{!showAll}" />
               </apex:pageBlockButtons> 

            		<apex:pageBlockTable value="{!callRecords}" var="x">
					<apex:column headerValue="Action">
						<apex:commandLink value="View" action="{!viewCallRecord}"  style="color:#015ba7" >
							<apex:param name="selectedCallRecordId" value="{!x.Id}" assignTo="{!selectedCallRecordId}" />
						</apex:commandLink> 
						<apex:outputText value=" | "  style="color:#015ba7" />
						<apex:commandLink value="Reconcile" action="{!reconcileCallRecord}"  style="color:#015ba7" >
							<apex:param name="selectedCallRecordId" value="{!x.Id}" assignTo="{!selectedCallRecordId}" />
						</apex:commandLink> 
					</apex:column>
                	<apex:column headerValue="Subject" >
                		<apex:outputField value="{!x.Subject}" >
                			<apex:inlineEditSupport event="onmouseup" />
                		</apex:outputField>
                	</apex:column>
                 	<apex:column headerValue="Is Personal" >
                		<apex:outputField value="{!x.skyplatform__Is_Personal__c}" >
                			<apex:inlineEditSupport event="onmouseup" />
                		</apex:outputField>
                	</apex:column>
                	<apex:column headerValue="Contact"><apex:outputField value="{!x.WhoId}"/></apex:column>
                	<apex:column headerValue="Related To"><apex:outputField value="{!x.WhatId}"/></apex:column>
                	<apex:column headerValue="Start Date and Time"><apex:outputField value="{!x.skyplatform__Call_Start_Date_Time__c}"/></apex:column>
                	<apex:column headerValue="Duration"><apex:outputField value="{!x.CallDurationInSeconds}"/></apex:column>
                	<apex:column headerValue="Call Type"><apex:outputField value="{!x.CallType}"/></apex:column>
                	<apex:column headerValue="From Phone"><apex:outputField value="{!x.skyplatform__From_Phone__c}"/></apex:column>
                	<apex:column headerValue="To Phone"><apex:outputField value="{!x.skyplatform__To_Phone__c}"/></apex:column>
                	<apex:column headerValue="Imported"><apex:outputField value="{!x.skyplatform__Is_Imported__c}"/></apex:column>
           		</apex:pageBlockTable>
           	</apex:pageBlock>
        	
        </apex:pageBlock> 
               
    </apex:form>
</apex:page>